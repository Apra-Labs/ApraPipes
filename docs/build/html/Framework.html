<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Framework &mdash; Apra Pipes v0 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/rtd.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Adding New Module" href="Tutorial_Adding_New_Module.html" />
    <link rel="prev" title="Introduction" href="Introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Apra Pipes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#moduleprops">ModuleProps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quepushstrategytype">QuePushStrategyType</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module">Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pipeline">Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#externalsourcemodule">ExternalSourceModule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filereadermoduleprops">FileReaderModuleProps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filereadermodule">FileReaderModule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jpegdecoderimprops">JPEGDecoderIMProps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jpegdecoderim">JPEGDecoderIM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calchistogramcvprops">CalcHistogramCVProps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calchistogramcv">CalcHistogramCV</a></li>
<li class="toctree-l2"><a class="reference internal" href="#changedetectionprops">ChangeDetectionProps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#changedetection">ChangeDetection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jpegencoderimprops">JPEGEncoderIMProps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jpegencoderim">JPEGEncoderIM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filewritermoduleprops">FileWriterModuleProps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filewritermodule">FileWriterModule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jpegdecoderl4tm">JPEGDecoderL4TM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jpegencoderl4tm">JPEGEncoderL4TM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vimbasource">VimbaSource</a></li>
<li class="toctree-l2"><a class="reference internal" href="#edgedefectanalysis">EdgeDefectAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loggerprops">LoggerProps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logger">Logger</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial_Adding_New_Module.html">Adding New Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="NvidiaCUDAModules.html">NVIDIA CUDA Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="CUDAKernelProgrammingGuide.html">CUDA Kernel Programming Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Apra Pipes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Framework</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Framework.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="framework">
<h1>Framework<a class="headerlink" href="#framework" title="Permalink to this headline">¶</a></h1>
<div class="section" id="moduleprops">
<h2>ModuleProps<a class="headerlink" href="#moduleprops" title="Permalink to this headline">¶</a></h2>
<p>Base Properties class for all modules</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">fps</span><span class="p">;</span> <span class="c1">// can be updated during runtime with setProps</span>
<span class="kt">size_t</span> <span class="n">qlen</span><span class="p">;</span> <span class="c1">// run time changing doesn&#39;t effect this</span>
<span class="kt">bool</span> <span class="n">logHealth</span><span class="p">;</span> <span class="c1">// can be updated during runtime with setProps</span>
<span class="kt">int</span> <span class="n">logHealthFrequency</span><span class="p">;</span> <span class="c1">// 1000 by default - logs the health stats frequency</span>

<span class="c1">// used for VimbaSource where we want to create the max frames and keep recycling it</span>
<span class="c1">// for the VimbaDrive we announce frames after init - 100/200</span>
<span class="c1">// see VimbaSource.cpp on how it is used</span>
<span class="kt">size_t</span> <span class="n">maxConcurrentFrames</span><span class="p">;</span>

<span class="c1">// 0/1 - skipN == 0 -  don&#39;t skip any - process all</span>
<span class="c1">// 1/1 - skipN == skipD - skip all - don&#39;t process any</span>
<span class="c1">// 1/2 skips every alternate frame</span>
<span class="c1">// 1/3 skips 1 out of every 3 frames</span>
<span class="c1">// 2/3 skips 2 out of every 3 frames</span>
<span class="c1">// 5/6 skips 5 out of every 6 frames</span>
<span class="c1">// skipD &gt;= skipN</span>
<span class="kt">int</span> <span class="n">skipN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">skipD</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="quepushstrategytype">
<h2>QuePushStrategyType<a class="headerlink" href="#quepushstrategytype" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span> <span class="n">QuePushStrategyType</span> <span class="p">{</span>
     <span class="n">BLOCKING</span><span class="p">,</span>
     <span class="n">NON_BLOCKING_ANY</span><span class="p">,</span> <span class="c1">// try push independently to child modules</span>
     <span class="n">NON_BLOCKING_ALL_OR_NONE</span> <span class="c1">// try push only if all the child modules have the que free or don&#39;t push to any of the modules</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="module">
<h2>Module<a class="headerlink" href="#module" title="Permalink to this headline">¶</a></h2>
<p>Base class for all the modules</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">addOutputPin</span><span class="p">(</span><span class="n">framemetadata_sp</span><span class="o">&amp;</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">pinId</span><span class="p">);</span>
<span class="kt">bool</span> <span class="nf">setNext</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Module</span><span class="o">&gt;</span> <span class="n">next</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="pipeline">
<h2>Pipeline<a class="headerlink" href="#pipeline" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PipeLine</span><span class="p">(</span><span class="n">string</span> <span class="n">name</span><span class="p">)</span>

<span class="cm">/*</span>
<span class="cm">   call appendModule on only the topmost module - source (camera/file)</span>
<span class="cm">   call appendModule only after connecting all the modules -</span>
<span class="cm">   if any modules are connected (module1-&gt;setNext(module2)) after appendModule then these modules will not be added to the pipeline</span>
<span class="cm">   best practice is to first make the connections - all modules - then call appendModule</span>
<span class="cm">*/</span>
<span class="kt">bool</span> <span class="n">appendModule</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Module</span><span class="o">&gt;</span> <span class="n">pModule</span><span class="p">);</span>
<span class="kt">bool</span> <span class="nf">init</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">run_all_threaded</span><span class="p">();</span>

<span class="kt">void</span> <span class="nf">stop</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">term</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">wait_for_all</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="externalsourcemodule">
<h2>ExternalSourceModule<a class="headerlink" href="#externalsourcemodule" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">uint64_t</span><span class="o">&gt;</span> <span class="n">produceExternalFrame</span><span class="p">(</span><span class="n">ApraData</span><span class="o">*</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">locked</span></code> is atomically incremented and decremented</li>
<li>std::pair&lt;bool, uint64_t&gt; is returned</li>
<li>if data-&gt;fIndex == 0 fIndex is incremented by the framework and returns the value</li>
<li>if data-&gt;fIndex != 0 fIndex is same as data-&gt;fIndex</li>
<li>if <code class="docutils literal notranslate"><span class="pre">false</span></code> is returned, then the data is not accepted.Framework Que is full and there is no bandwidth to process more data</li>
<li>it is upto the caller application to act on the response of <code class="docutils literal notranslate"><span class="pre">produceExternalFrame</span></code></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="n">stop</span><span class="p">()</span>
<span class="n">when</span> <span class="n">ExternalSourceModule</span> <span class="n">is</span> <span class="n">not</span> <span class="n">attached</span> <span class="n">to</span> <span class="n">the</span> <span class="n">pipeline</span><span class="p">,</span> <span class="n">manually</span> <span class="n">call</span> <span class="n">stop</span> <span class="n">to</span> <span class="n">trigger</span> <span class="n">a</span> <span class="n">tear</span> <span class="n">down</span> <span class="n">of</span> <span class="n">the</span> <span class="n">downstream</span> <span class="n">modules</span>
</pre></div>
</div>
</div>
<div class="section" id="filereadermoduleprops">
<h2>FileReaderModuleProps<a class="headerlink" href="#filereadermoduleprops" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">FileReaderModuleProps</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">strFullFileNameWithPattern</span><span class="p">,</span> <span class="kt">int</span> <span class="n">startIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">int</span> <span class="n">maxIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>loops till the <code class="docutils literal notranslate"><span class="pre">maxIndex</span></code> is reached
<code class="docutils literal notranslate"><span class="pre">-1</span></code> loop the entire pattern/directory</li>
<li>starts the loop from <code class="docutils literal notranslate"><span class="pre">startIndex</span></code></li>
</ul>
</div>
<div class="section" id="filereadermodule">
<h2>FileReaderModule<a class="headerlink" href="#filereadermodule" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">FileReaderModule</span><span class="p">(</span><span class="n">FileReaderModuleProps</span> <span class="n">props</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="jpegdecoderimprops">
<h2>JPEGDecoderIMProps<a class="headerlink" href="#jpegdecoderimprops" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">JPEGDecoderIMProps</span><span class="p">(</span><span class="kt">bool</span> <span class="n">sw</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">true</span></code> if deocde is on software</li>
<li><code class="docutils literal notranslate"><span class="pre">false</span></code> if decode is on hardware</li>
</ul>
</div>
<div class="section" id="jpegdecoderim">
<h2>JPEGDecoderIM<a class="headerlink" href="#jpegdecoderim" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">JPEGDecoderIM</span><span class="p">(</span><span class="n">JPEGDecoderIMProps</span> <span class="n">props</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>Currently only supports single channel output</li>
</ul>
</div>
<div class="section" id="calchistogramcvprops">
<h2>CalcHistogramCVProps<a class="headerlink" href="#calchistogramcvprops" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CalcHistogramCVProps</span><span class="p">(</span><span class="kt">int</span> <span class="n">bins</span><span class="p">);</span>
<span class="c1">// All the properties can be updated during run time using setProps</span>
<span class="kt">int</span> <span class="n">bins</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">roi</span><span class="p">;</span>
<span class="n">string</span> <span class="n">maskImgPath</span><span class="p">;</span>
</pre></div>
</div>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">bins</span></code> number of histogram bins</p>
</li>
<li><div class="first line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">maskImgPath</span></code> absolute path of mask image path</div>
<div class="line">Expected to be Same resolution as the dataset</div>
<div class="line">if both roi and mask_img_path is specified roi is used and mask_img_path ignored</div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">roi</span></code> topleft_x topleft_y width height</div>
<div class="line">if both roi and mask_img_path is specified roi is used and mask_img_path ignored</div>
</div>
</li>
</ul>
</div>
<div class="section" id="calchistogramcv">
<h2>CalcHistogramCV<a class="headerlink" href="#calchistogramcv" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CalcHistogramCV</span><span class="p">(</span><span class="n">CalcHistogramCVProps</span> <span class="n">props</span><span class="p">);</span>
<span class="n">CalcHistogramCVProps</span> <span class="nf">getProps</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">setProps</span><span class="p">(</span><span class="n">CalcHistogramCVProps</span> <span class="n">props</span><span class="p">);</span>

<span class="c1">// Example on how to change Properties dynamically</span>
<span class="k">auto</span> <span class="n">histogram</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CalcHistogramCV</span><span class="p">(</span><span class="n">CalcHistogramCVProps</span><span class="p">(</span><span class="mi">32</span><span class="p">));</span>
<span class="k">auto</span> <span class="n">newHistProps</span> <span class="o">=</span> <span class="n">histogram</span><span class="o">-&gt;</span><span class="n">getProps</span><span class="p">();</span>
<span class="n">newHistProps</span><span class="p">.</span><span class="n">bins</span> <span class="o">=</span> <span class="n">newHistProps</span><span class="p">.</span><span class="n">bins</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
<span class="n">histogram</span><span class="o">-&gt;</span><span class="n">setProps</span><span class="p">(</span><span class="n">newHistProps</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="changedetectionprops">
<h2>ChangeDetectionProps<a class="headerlink" href="#changedetectionprops" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">ChangeDetectionProps</span><span class="p">(</span><span class="kt">int</span> <span class="n">refWindoweLength</span><span class="p">,</span> <span class="kt">int</span> <span class="n">refDelayLength</span><span class="p">,</span> <span class="kt">int</span> <span class="n">insWindowLength</span><span class="p">,</span> <span class="kt">double</span> <span class="n">threshold</span><span class="p">,</span> <span class="kt">int</span> <span class="n">compareMethod</span><span class="p">);</span>
<span class="c1">// All the properties can be updated during run time using setProps</span>
</pre></div>
</div>
<ul>
<li><div class="first line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">refWindowLength</span></code> Number of frames to average</div>
<div class="line">Assume <code class="docutils literal notranslate"><span class="pre">fps</span> <span class="pre">=</span> <span class="pre">30</span></code> and you want to average <code class="docutils literal notranslate"><span class="pre">2</span></code> seconds then specify <code class="docutils literal notranslate"><span class="pre">refWindowLength</span></code> as <code class="docutils literal notranslate"><span class="pre">60</span></code></div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">refDelayLength</span></code> Number of frames to delay from the current frame</div>
<div class="line">default <code class="docutils literal notranslate"><span class="pre">-1</span></code> - Static reference</div>
<div class="line">if moving average is required speicfy the delay</div>
<div class="line">Assume <code class="docutils literal notranslate"><span class="pre">fps</span> <span class="pre">=</span> <span class="pre">30</span></code> and you want to delay 2 minutes then specify <code class="docutils literal notranslate"><span class="pre">refDelayLength</span></code> as <code class="docutils literal notranslate"><span class="pre">3600</span></code></div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">insWindowLength</span></code> Number of frames to average</div>
<div class="line">Assume <code class="docutils literal notranslate"><span class="pre">fps</span> <span class="pre">=</span> <span class="pre">30</span></code> and you want to average 0.5 seconds then specify <code class="docutils literal notranslate"><span class="pre">insWindowLength</span></code> as <code class="docutils literal notranslate"><span class="pre">15</span></code></div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">compareMethod</span></code> <a class="reference external" href="https://docs.opencv.org/4.1.1/d8/dc8/tutorial_histogram_comparison.html">https://docs.opencv.org/4.1.1/d8/dc8/tutorial_histogram_comparison.html</a></div>
<div class="line">HISTCMP_CHISQR (1) works for all the datasets provided</div>
</div>
</li>
</ul>
</div>
<div class="section" id="changedetection">
<h2>ChangeDetection<a class="headerlink" href="#changedetection" title="Permalink to this headline">¶</a></h2>
<p>Sends ChangeDetectionResult to the next module</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">ChangeDetection</span><span class="p">(</span><span class="n">ChangeDetectionProps</span> <span class="n">props</span><span class="p">);</span>
<span class="n">ChangeDetectionProps</span> <span class="nf">getProps</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">setProps</span><span class="p">(</span><span class="n">ChangeDetectionProps</span> <span class="n">props</span><span class="p">);</span>

<span class="c1">// Example on how to change Properties dynamically</span>
<span class="k">auto</span> <span class="n">module</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChangeDetection</span><span class="p">(</span><span class="n">ChangeDetectionProps</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
<span class="k">auto</span> <span class="n">newProps</span> <span class="o">=</span> <span class="n">module</span><span class="o">-&gt;</span><span class="n">getProps</span><span class="p">();</span>
<span class="n">newProps</span><span class="p">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">module</span><span class="o">-&gt;</span><span class="n">setProps</span><span class="p">(</span><span class="n">newProps</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="jpegencoderimprops">
<h2>JPEGEncoderIMProps<a class="headerlink" href="#jpegencoderimprops" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="n">sw</span><span class="p">;</span> <span class="c1">// software or hardware mode</span>
<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">quality</span><span class="p">;</span> <span class="c1">// range 1-100 JPEG Compression quality - 100 means best quality but more file size</span>
</pre></div>
</div>
</div>
<div class="section" id="jpegencoderim">
<h2>JPEGEncoderIM<a class="headerlink" href="#jpegencoderim" title="Permalink to this headline">¶</a></h2>
<p>Intel Media SDK based encoder</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">JPEGEncoderIM</span><span class="p">(</span><span class="n">JPEGEncoderProps</span> <span class="n">props</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>Currently only supports single channel as input</li>
</ul>
</div>
<div class="section" id="filewritermoduleprops">
<h2>FileWriterModuleProps<a class="headerlink" href="#filewritermoduleprops" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">FileWriterModuleProps</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">strFullFileNameWithPattern</span><span class="p">);</span>

<span class="c1">// Example</span>
<span class="k">auto</span> <span class="n">props</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileWriterModuleProps</span><span class="p">(</span><span class="s">&quot;C:/Users/developer/Downloads/Sai/temp/enc/frame_????.jpg&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="filewritermodule">
<h2>FileWriterModule<a class="headerlink" href="#filewritermodule" title="Permalink to this headline">¶</a></h2>
<p>Basic FileWriter</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">FileWriterModule</span><span class="p">(</span><span class="n">FileWriterModuleProps</span> <span class="n">props</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="jpegdecoderl4tm">
<h2>JPEGDecoderL4TM<a class="headerlink" href="#jpegdecoderl4tm" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">JPEGDecoderL4TMProps</span><span class="p">();</span>
<span class="n">JPEGDecoderL4TM</span><span class="p">(</span><span class="n">JPEGDecoderL4TMProps</span> <span class="n">props</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>Currently only supports single channel output</li>
</ul>
</div>
<div class="section" id="jpegencoderl4tm">
<h2>JPEGEncoderL4TM<a class="headerlink" href="#jpegencoderl4tm" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">JPEGEncoderL4TMProps</span><span class="p">();</span>
<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">quality</span><span class="p">;</span> <span class="c1">// range 1-100 JPEG Compression quality - 100 means best quality but more file size</span>

<span class="n">JPEGEncoderL4TM</span><span class="p">(</span><span class="n">JPEGEncoderL4TMProps</span> <span class="n">props</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>Currently only supports single channel input</li>
</ul>
</div>
<div class="section" id="vimbasource">
<h2>VimbaSource<a class="headerlink" href="#vimbasource" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">VimbaSourceProps</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">_maxConcurrentFrames</span><span class="p">);</span> <span class="c1">// 2*fps of the camera is a good value</span>
<span class="c1">// _maxConcurrentFrames is used to announceFrames to the vimbaDriver Camera</span>

<span class="n">VimbaSource</span><span class="p">(</span><span class="n">VimbaSourceProps</span> <span class="n">_props</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="edgedefectanalysis">
<h2>EdgeDefectAnalysis<a class="headerlink" href="#edgedefectanalysis" title="Permalink to this headline">¶</a></h2>
<p>Sends EdgeDefectAnalysisResult to the next module</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EdgeDefectAnalysisConfig</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
   <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">roi</span><span class="p">;</span>
   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">edgePos</span><span class="p">;</span> <span class="c1">// &quot;R&quot; &quot;L&quot;</span>

   <span class="kt">int</span> <span class="n">gaussianKernelSize</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">edgeDefectWidth</span><span class="p">;</span>

   <span class="c1">// parameters for edge localization</span>
   <span class="c1">// https://docs.opencv.org/2.4/modules/imgproc/doc/feature_detection.html?highlight=canny#canny</span>
   <span class="kt">int</span> <span class="n">lowThresh</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">highThresh</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">phaseLowThresh</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">phaseHighThresh</span><span class="p">;</span>
   <span class="c1">//https://docs.opencv.org/2.4/modules/imgproc/doc/feature_detection.html?highlight=houghlinesp#houghlinesp</span>
   <span class="kt">int</span> <span class="n">lineThreshold</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">minLineLength</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">maxLineGap</span><span class="p">;</span>

   <span class="c1">// parameters for defect detection</span>
   <span class="c1">// https://docs.opencv.org/2.4/modules/imgproc/doc/feature_detection.html?highlight=canny#canny</span>
   <span class="kt">int</span> <span class="n">lowThresh2</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">highThresh2</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">phaseLowThresh2</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">phaseHighThresh2</span><span class="p">;</span>
   <span class="c1">//https://docs.opencv.org/2.4/modules/imgproc/doc/feature_detection.html?highlight=houghlinesp#houghlinesp</span>
   <span class="kt">int</span> <span class="n">lineThreshold2</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">minLineLength2</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">maxLineGap2</span><span class="p">;</span>

   <span class="kt">bool</span> <span class="n">enableDebug</span><span class="p">;</span> <span class="c1">// saves the intermediate results</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">EdgeDefectAnalysisProps</span><span class="o">:</span> <span class="n">ModuleProps</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
   <span class="n">EdgeDefectAnalysisConfig</span> <span class="n">config</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">EdgeDefectAnalysis</span><span class="p">(</span><span class="n">EdgeDefectAnalysisProps</span> <span class="n">props</span><span class="p">);</span>

<span class="k">class</span> <span class="nc">EdgeDefectAnalysisResult</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
     <span class="kt">bool</span> <span class="n">isEdgeFound</span><span class="p">;</span>
      <span class="kt">bool</span> <span class="n">isDefect</span><span class="p">;</span>
      <span class="kt">uint64_t</span> <span class="n">fIndex</span><span class="p">;</span>
      <span class="kt">uint64_t</span> <span class="n">timestamp</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="loggerprops">
<h2>LoggerProps<a class="headerlink" href="#loggerprops" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="n">enableConsoleLog</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">enableFileLog</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">fileLogPath</span><span class="p">;</span>
<span class="n">boost</span><span class="o">::</span><span class="n">log</span><span class="o">::</span><span class="n">trivial</span><span class="o">::</span><span class="n">severity_level</span> <span class="n">logLevel</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="logger">
<h2>Logger<a class="headerlink" href="#logger" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">static</span> <span class="kt">void</span> <span class="nf">initLogger</span><span class="p">(</span><span class="n">LoggerProps</span> <span class="n">props</span><span class="p">);</span> <span class="c1">// valid only once - if called second time - nothing happens. Use the set methods for changes during runtime</span>
<span class="kt">void</span> <span class="nf">setLogLevel</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">log</span><span class="o">::</span><span class="n">trivial</span><span class="o">::</span><span class="n">severity_level</span> <span class="n">severity</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">setConsoleLog</span><span class="p">(</span><span class="kt">bool</span> <span class="n">enableLog</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">setFileLog</span><span class="p">(</span><span class="kt">bool</span> <span class="n">enableLog</span><span class="p">);</span>

<span class="n">The</span> <span class="n">below</span> <span class="n">macros</span> <span class="n">are</span> <span class="n">available</span> <span class="k">for</span> <span class="n">logging</span>
<span class="n">LOG_TRACE</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A trace severity message&quot;</span><span class="p">;</span>
<span class="n">LOG_DEBUG</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A debug severity message&quot;</span><span class="p">;</span>
<span class="n">LOG_INFO</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;An informational severity message&quot;</span><span class="p">;</span>
<span class="n">LOG_WARNING</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A warning severity message&quot;</span><span class="p">;</span>
<span class="n">LOG_ERROR</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;An error severity message&quot;</span><span class="p">;</span>
<span class="n">LOG_FATAL</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;A fatal severity message&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Tutorial_Adding_New_Module.html" class="btn btn-neutral float-right" title="Adding New Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, Apra Labs.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>