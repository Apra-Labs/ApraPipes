# 10_bmp_converter_pipeline.toml
# Converts test signal frames to BMP images and saves them to disk
# Chain: TestSignalGenerator → ColorConversion → BMPConverter → FileWriter
#
# This pipeline demonstrates:
# - Image format conversion (YUV420Planar → RGB → BMP)
# - File output with sequential naming
# - BMPConverter module for creating standard image files

[pipeline]
name = "BMP Converter Pipeline"
description = "Generates test frames and saves them as BMP images"

# Generate test frames (output: RawImagePlanar in YUV420 format)
[modules.generator]
type = "TestSignalGenerator"
  [modules.generator.props]
  width = 320
  height = 240

# Convert from YUV420Planar to RGB (required for BMPConverter)
[modules.color_convert]
type = "ColorConversion"
  [modules.color_convert.props]
  conversionType = "YUV420PLANAR_TO_RGB"

# Convert RGB raw image to BMP format
[modules.bmp_encoder]
type = "BMPConverter"
# No additional props needed - uses defaults

# Write BMP files to disk with sequential naming
[modules.writer]
type = "FileWriterModule"
  [modules.writer.props]
  strFullFileNameWithPattern = "/tmp/declarative_test/bmp_output/frame_????.bmp"

[[connections]]
from = "generator"
to = "color_convert"

[[connections]]
from = "color_convert"
to = "bmp_encoder"

[[connections]]
from = "bmp_encoder"
to = "writer"
