# 06_face_detector_with_conversion.toml
# Analytics pipeline: TestSignalGenerator → ColorConversion → FaceDetectorXform → StatSink
# Fixed version of 03_face_detector.toml with proper frame type conversion
#
# TestSignalGenerator outputs RawImagePlanar (YUV420)
# FaceDetectorXform requires RawImage (RGB)
# ColorConversion bridges the gap with YUV420PLANAR_TO_RGB conversion

[pipeline]
name = "face_detector_fixed"
description = "Pipeline testing face detection with frame type conversion"

[modules.generator]
type = "TestSignalGenerator"
  [modules.generator.props]
  width = 640
  height = 480

# Bridge module: converts RawImagePlanar → RawImage
[modules.convert]
type = "ColorConversion"
  [modules.convert.props]
  conversionType = "YUV420PLANAR_TO_RGB"

[modules.face_detect]
type = "FaceDetectorXform"
# Uses defaults

[modules.stats]
type = "StatSink"

[[connections]]
from = "generator"
to = "convert"

[[connections]]
from = "convert"
to = "face_detect"

[[connections]]
from = "face_detect"
to = "stats"
